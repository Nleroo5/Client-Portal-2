<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Launch Portal - Drive Lead Media</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Young+Serif:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #012E40 0%, #05908C 100%); display: flex; align-items: center; justify-content: center; z-index: 999999;">
        <div style="text-align: center; color: #EEF4D9;">
            <h2 style="font-family: 'Young Serif', serif; margin-bottom: 20px;">Loading Portal...</h2>
            <div style="width: 50px; height: 50px; border: 3px solid #EEF4D9; border-radius: 50%; border-top-color: transparent; animation: spin 1s linear infinite; margin: 0 auto;"></div>
        </div>
    </style>

    <!-- Admin Panel -->
    <div id="adminPanel" style="display: none;">
        <div style="background: linear-gradient(135deg, #012E40 0%, #05908C 100%); color: #EEF4D9; padding: 20px; margin-bottom: 30px;">
            <h1 style="font-family: 'Young Serif', serif; margin-bottom: 10px;">Admin Dashboard</h1>
            <p>Manage Client Portals - Drive Lead Media</p>
        </div>
        
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 20px;">
            <!-- Alert Messages -->
            <div id="adminAlert" style="display: none; padding: 15px; border-radius: 8px; margin-bottom: 20px;"></div>
            
            <!-- Create New Client -->
            <div style="background: white; border-radius: 12px; padding: 25px; margin-bottom: 25px; box-shadow: 0 4px 15px rgba(5, 144, 140, 0.1); border: 1px solid #85C7B3;">
                <h2 style="color: #05908C; font-size: 1.5rem; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #85C7B3;">Create New Client Portal</h2>
                <form id="createClientForm">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <label style="display: block; color: #012E40; font-weight: 600; margin-bottom: 5px;">Client/Business Name *</label>
                            <input type="text" id="clientName" required style="width: 100%; padding: 10px 15px; border: 2px solid #85C7B3; border-radius: 8px;">
                        </div>
                        <div>
                            <label style="display: block; color: #012E40; font-weight: 600; margin-bottom: 5px;">Client Email</label>
                            <input type="email" id="clientEmail" style="width: 100%; padding: 10px 15px; border: 2px solid #85C7B3; border-radius: 8px;">
                        </div>
                    </div>
                    
                    <div style="background: #F0F9F7; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h3 style="color: #05908C; margin-bottom: 10px;">DocuSign Links (Optional)</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <label style="display: block; color: #012E40; font-weight: 600; margin-bottom: 5px;">Custom DPA Link</label>
                                <input type="url" id="dpaLink" placeholder="Leave blank for default" style="width: 100%; padding: 8px 12px; border: 2px solid #85C7B3; border-radius: 6px;">
                            </div>
                            <div>
                                <label style="display: block; color: #012E40; font-weight: 600; margin-bottom: 5px;">Custom Service Agreement</label>
                                <input type="url" id="serviceAgreementLink" placeholder="Leave blank for default" style="width: 100%; padding: 8px 12px; border: 2px solid #85C7B3; border-radius: 6px;">
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: #F0F9F7; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h3 style="color: #05908C; margin-bottom: 10px;">Other Links (Optional)</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div>
                                <label style="display: block; color: #012E40; font-weight: 600; margin-bottom: 5px;">Google Drive Upload Link</label>
                                <input type="url" id="googleDriveLink" placeholder="Leave blank for default" style="width: 100%; padding: 8px 12px; border: 2px solid #85C7B3; border-radius: 6px;">
                            </div>
                            <div>
                                <label style="display: block; color: #012E40; font-weight: 600; margin-bottom: 5px;">Invoice Payment Link</label>
                                <input type="url" id="invoiceLink" placeholder="Stripe payment link" style="width: 100%; padding: 8px 12px; border: 2px solid #85C7B3; border-radius: 6px;">
                            </div>
                        </div>
                        <div>
                            <label style="display: block; color: #012E40; font-weight: 600; margin-bottom: 5px;">Creative Preview Link</label>
                            <input type="url" id="creativeLink" placeholder="Add later when creatives are ready" style="width: 100%; padding: 8px 12px; border: 2px solid #85C7B3; border-radius: 6px;">
                        </div>
                    </div>
                    
                    <button type="submit" style="padding: 12px 24px; background: #F2A922; color: #012E40; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Create Client Portal</button>
                </form>
            </div>
            
            <!-- Existing Clients -->
            <div style="background: white; border-radius: 12px; padding: 25px; margin-bottom: 25px; box-shadow: 0 4px 15px rgba(5, 144, 140, 0.1); border: 1px solid #85C7B3;">
                <h2 style="color: #05908C; font-size: 1.5rem; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #85C7B3;">Existing Clients</h2>
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: #05908C; color: #EEF4D9;">
                            <th style="padding: 12px; text-align: left;">Client Name</th>
                            <th style="padding: 12px; text-align: left;">Status</th>
                            <th style="padding: 12px; text-align: left;">Progress</th>
                            <th style="padding: 12px; text-align: left;">Portal Link</th>
                            <th style="padding: 12px; text-align: left;">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="clientsTableBody">
                        <!-- Clients will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Floating Progress Sidebar -->
    <div class="floating-progress-sidebar" id="floatingProgressSidebar">
        <div class="sidebar-progress-header">
            <div class="progress-percentage-circle">
                <svg>
                    <circle class="background" cx="25" cy="25" r="20"></circle>
                    <circle class="progress" id="sidebarProgressCircle" cx="25" cy="25" r="20" 
                            stroke-dasharray="126" stroke-dashoffset="126"></circle>
                </svg>
                <div class="progress-percentage-text" id="sidebarProgressPercent">0%</div>
            </div>
            <div class="progress-message" id="sidebarProgressMessage">Let's get started!</div>
        </div>
        <div class="sidebar-steps-track">
            <div class="sidebar-step-item">
                <div class="sidebar-step-bubble upcoming" id="sidebarBubble1">1</div>
                <div class="sidebar-step-info">
                    <div class="sidebar-step-label">Agreements</div>
                </div>
            </div>
            <div class="sidebar-step-item">
                <div class="sidebar-step-bubble upcoming" id="sidebarBubble2">2</div>
                <div class="sidebar-step-info">
                    <div class="sidebar-step-label">Payment</div>
                </div>
            </div>
            <div class="sidebar-step-item">
                <div class="sidebar-step-bubble upcoming" id="sidebarBubble3">3</div>
                <div class="sidebar-step-info">
                    <div class="sidebar-step-label">Meta Setup</div>
                </div>
            </div>
            <div class="sidebar-step-item">
                <div class="sidebar-step-bubble upcoming" id="sidebarBubble4">4</div>
                <div class="sidebar-step-info">
                    <div class="sidebar-step-label">Tracking</div>
                </div>
            </div>
            <div class="sidebar-step-item">
                <div class="sidebar-step-bubble upcoming" id="sidebarBubble5">5</div>
                <div class="sidebar-step-info">
                    <div class="sidebar-step-label">Approval</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Client Portal -->
    <div class="portal-container" id="clientPortal">
        <!-- Admin Access Button -->
        <div style="position: fixed; bottom: 20px; right: 20px; z-index: 1000;">
            <button id="adminAccessBtn" onclick="showAdminLogin()" style="background: #012E40; color: #EEF4D9; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 0.8rem;">Admin</button>
        </div>

        <!-- Hero Section -->
        <div class="hero">
            <h1>Client Launch Portal</h1>
            <p>Complete each step. We'll handle the rest.</p>
            
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text">
                    <span id="progressText">0 of 5 steps completed</span>
                    <span id="progressPercent">0%</span>
                </div>
            </div>
        </div>

        <!-- Success Message -->
        <div class="success-message" id="successMessage" style="display: none;">
            <h3>üéâ Launch Complete!</h3>
            <p>All steps completed successfully. Your campaign will be live within 24-48 hours.</p>
        </div>

        <!-- Step 1: Sign Agreements -->
        <div class="step" id="step1">
            <div class="step-header">
                <div>
                    <h2>Sign Your Agreements</h2>
                    <div class="step-note">You'll receive copies automatically by email.</div>
                </div>
                <div class="step-number">1</div>
            </div>
            <div class="step-content">
                <div style="margin-bottom: 20px;">
                    <a href="#" class="btn" id="serviceAgreementBtn" target="_blank" rel="noopener">
                        Sign Service Agreement
                    </a>
                    <a href="#" class="btn" id="dpaBtn" target="_blank" rel="noopener">
                        Sign DPA (Data Processing Agreement)
                    </a>
                </div>
            </div>
            <div class="step-actions">
                <button class="btn btn-complete" onclick="window.markStepComplete(1)">Mark Step 1 Complete</button>
            </div>
        </div>

        <!-- Step 2: Pay First Invoice -->
        <div class="step locked" id="step2">
            <div class="step-header">
                <div>
                    <h2>Pay First Invoice</h2>
                    <div class="step-note">Secure payment processing via Stripe. All major payment methods accepted.</div>
                </div>
                <div class="step-number">2</div>
            </div>
            <div class="step-content">
                <p style="color: #012E40; margin-bottom: 20px;">Click the link below to pay your first invoice securely through Stripe.</p>
                
                <a href="#" class="btn" id="invoiceBtn" target="_blank" rel="noopener">
                    Pay First Invoice
                </a>
            </div>
            <div class="step-actions">
                <button class="btn btn-complete" onclick="window.markStepComplete(2)">Mark Step 2 Complete</button>
            </div>
        </div>

        <!-- Step 3: Meta Access & Brand Kit -->
        <div class="step locked" id="step3">
            <div class="step-header">
                <div>
                    <h2>Meta Access & Brand Kit</h2>
                </div>
                <div class="step-number">3</div>
            </div>
            <div class="step-content">
                <div style="margin-bottom: 25px;">
                    <h4 style="color: #012E40; margin-bottom: 15px;">Meta Business Suite Setup</h4>
                    <p style="color: #012E40; margin-bottom: 15px;">Let's handle this together - I'll walk you through the setup step-by-step.</p>
                    
                    <div style="background: #DFF5F3; padding: 25px; border-radius: 12px; border: 2px solid #85C7B3; text-align: center; max-width: 450px; margin: 0 auto;">
                        <img src="https://www.driveleadmedia.com/s/IMG_1337.png" 
                             alt="Nicolas - Drive Lead Media" 
                             style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-bottom: 15px; border: 3px solid #05908C;">
                        
                        <h5 style="color: #012E40; margin-bottom: 10px;">Call Nicolas</h5>
                        
                        <div style="background: #05908C; color: #EEF4D9; padding: 12px 20px; border-radius: 8px; margin: 15px 0; font-size: 1.1rem; font-weight: 700;">
                            <a href="tel:+16786506411" style="color: #EEF4D9; text-decoration: none;">
                                (678) 650-6411
                            </a>
                        </div>
                        
                        <div style="color: #012E40; font-size: 0.9rem; line-height: 1.5;">
                            <p style="margin-bottom: 5px;"><strong>Available:</strong> 9am - 5pm, Mon-Sat</p>
                            <p style="margin-bottom: 10px;"><strong>Call Duration:</strong> ~15 minutes</p>
                            
                            <div style="background: rgba(242, 169, 34, 0.1); padding: 10px; border-radius: 6px; border-left: 3px solid #F2A922; margin-top: 10px;">
                                <p style="margin: 0; font-size: 0.85rem;">
                                    If I don't answer, shoot me a text or leave a voicemail - I'll get right back to you.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Brand Kit Upload Section -->
                <div style="margin: 30px 0 20px 0; border-top: 2px solid rgba(133, 199, 179, 0.3); padding-top: 25px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px; flex-wrap: wrap;">
                        <h4 style="color: #012E40; margin: 0;">üìÅ Brand Kit Upload:</h4>
                        <button class="btn btn-small btn-outline" id="brandKitInfoBtn" style="font-size: 0.8rem; padding: 4px 12px;" onclick="window.toggleBrandKitInfo()">
                            What is a brand kit?
                        </button>
                    </div>
                    
                    <!-- Brand Kit Explanation (hidden initially) -->
                    <div id="brandKitInfo" style="display: none; background: #FBE9D1; padding: 20px; border-radius: 8px; margin: 15px 0; border: 1px solid #F2A922;">
                        <h5 style="color: #012E40; margin-bottom: 10px;">Your Brand Kit Should Include:</h5>
                        <div class="brand-kit-grid">
                            <div>
                                <h6 style="color: #012E40; margin-bottom: 8px; font-weight: 600;">üé® Logo Files:</h6>
                                <ul style="margin-left: 15px; color: #012E40; line-height: 1.5;">
                                    <li>High-resolution logo PNG (transparent background)</li>
                                    <li>Logo variations (if available)</li>
                                </ul>
                                <p style="color: #012E40; margin-top: 8px; font-size: 0.9rem; font-style: italic;">
                                    We can work with whatever you have, but the more options you provide, the more creative flexibility we'll have to make your ads stand out
                                </p>
                            </div>
                            <div>
                                <h6 style="color: #012E40; margin-bottom: 8px; font-weight: 600;">üåà Color Palette:</h6>
                                <ul style="margin-left: 15px; color: #012E40; line-height: 1.5;">
                                    <li>Brand colors (hex codes like #012E40)</li>
                                    <li>Color palette document or screenshot</li>
                                    <li>Brand guidelines PDF (if available)</li>
                                </ul>
                            </div>
                        </div>
                        <div style="background: #DFF5F3; padding: 15px; border-radius: 6px; border-left: 3px solid #05908C;">
                            <p style="color: #012E40; margin: 0; font-size: 0.9rem;">
                                <strong>üí° Don't have all of these?</strong> No worries! Upload whatever you have. Even just a logo PNG and your main brand colors will help us create ads that match your brand perfectly.
                            </p>
                        </div>
                    </div>
                    
                    <p style="color: #012E40; margin-bottom: 15px;">Upload your logos, brand guidelines, fonts, and any existing creative assets so we can create ads that perfectly match your brand.</p>
                    <a href="https://drive.google.com/drive/folders/1jds7K6SdV6G_SwTyZZjxqjuftqIHiaPY?usp=sharing" 
                       class="btn btn-outline" id="uploadBtn" target="_blank" rel="noopener">
                        Upload Brand Assets
                    </a>
                </div>
            </div>
            <div class="step-actions">
                <button class="btn btn-complete" onclick="window.markStepComplete(3)">Mark Step 3 Complete</button>
            </div>
        </div>

        <!-- Step 4: Website Access for Tracking -->
        <div class="step locked" id="step4">
            <div class="step-header">
                <div>
                    <h2>Website Access for Tracking</h2>
                    <div class="step-note">We install GA4 and Meta Pixel (no PHI). We handle all technical setup - you just provide access.</div>
                </div>
                <div class="step-number">4</div>
            </div>
            <div class="step-content">
                <div style="margin-bottom: 25px;">
                    <h4 style="color: #012E40; margin-bottom: 15px;">üñ•Ô∏è Website Access Needed</h4>
                    <p style="color: #012E40; margin-bottom: 15px;">Choose the easiest option for you:</p>
                    
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="connectWebAdmin" name="websiteAccess" value="connect" checked>
                            <label for="connectWebAdmin">Connect us with your website admin/developer</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="tempAccess" name="websiteAccess" value="temporary">
                            <label for="tempAccess">Grant us temporary website access</label>
                        </div>
                    </div>
                </div>

                <!-- Connect with website admin -->
                <div id="connectAdminForm" style="background: #DFF5F3; padding: 20px; border-radius: 8px; margin: 15px 0; border: 1px solid #85C7B3;">
                    <h5 style="color: #012E40; margin-bottom: 10px;">Website Admin Contact:</h5>
                    <div class="form-group">
                        <label for="adminName">Admin/Developer Name</label>
                        <input type="text" id="adminName">
                    </div>
                    <div class="form-group">
                        <label for="adminEmail">Admin Email *</label>
                        <input type="email" id="adminEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="adminPhone">Admin Phone </label>
                        <input type="tel" id="adminPhone">
                    </div>
                    <div class="form-group">
                        <label for="websitePlatform">Website Platform</label>
                        <select id="websitePlatform">
                            <option value="">Select platform</option>
                            <option value="wordpress">WordPress</option>
                            <option value="squarespace">Squarespace</option>
                            <option value="wix">Wix</option>
                            <option value="shopify">Shopify</option>
                            <option value="webflow">Webflow</option>
                            <option value="other">Other</option>
                        </select>
                        <input type="text" id="websitePlatformOther" placeholder="Please specify..." style="display: none; margin-top: 10px;">
                    </div>
                    <p style="font-size: 0.9rem; color: #012E40; margin-top: 10px;">
                        <strong>We'll contact them directly</strong> to coordinate tracking installation.
                    </p>
                    <div style="margin-top: 15px;">
                        <button class="btn btn-secondary btn-small" onclick="window.emailAdminDetails()">Email Admin Details to Us</button>
                    </div>
                </div>

                <!-- Temporary access form (hidden by default) -->
                <div id="tempAccessForm" style="display: none; background: #FBE9D1; padding: 20px; border-radius: 8px; margin: 15px 0; border: 1px solid #F2A922;">
                    <h5 style="color: #012E40; margin-bottom: 10px;">Temporary Website Access:</h5>
                    <div class="form-group">
                        <label for="websiteUrl">Website URL *</label>
                        <input type="url" id="websiteUrl" placeholder="https://yourwebsite.com" required>
                    </div>
                    <div class="form-group">
                        <label for="loginUrl">Login URL</label>
                        <input type="url" id="loginUrl" placeholder="https://yourwebsite.com/wp-admin">
                    </div>
                    <div class="form-group">
                        <label for="tempUsername">Admin Username *</label>
                        <input type="text" id="tempUsername" required>
                    </div>
                    <div class="form-group">
                        <label for="tempPassword">Admin Password *</label>
                        <input type="password" id="tempPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="sitePlatform">Website Platform</label>
                        <select id="sitePlatform">
                            <option value="">Select platform</option>
                            <option value="wordpress">WordPress</option>
                            <option value="squarespace">Squarespace</option>
                            <option value="wix">Wix</option>
                            <option value="shopify">Shopify</option>
                            <option value="webflow">Webflow</option>
                            <option value="other">Other</option>
                        </select>
                        <input type="text" id="sitePlatformOther" placeholder="Please specify..." style="display: none; margin-top: 10px;">
                    </div>
                    <p style="font-size: 0.9rem; color: #012E40; margin-top: 10px;">
                        <strong>üîí Secure:</strong> We'll install tracking and remove our access immediately. You can change the password afterward.
                    </p>
                    <div style="margin-top: 15px;">
                        <button class="btn btn-secondary btn-small" onclick="window.emailAccessDetails()">Send Access Details Securely</button>
                    </div>
                </div>

                <div style="margin-top: 25px; background: #F0F9F7; padding: 15px; border-radius: 8px;">
                    <div class="info-header">
                        <h5>What We Install:</h5>
                        <button class="btn-info" onclick="window.toggleGA4Info()">What is GA4?</button>
                        <button class="btn-info" onclick="window.togglePixelInfo()">What is Meta Pixel?</button>
                    </div>
                    
                    <!-- GA4 Explanation (hidden initially) -->
                    <div id="ga4Info" class="info-box">
                        <h6>Google Analytics 4 (GA4):</h6>
                        <p>
                            GA4 tracks how people find and use your website. It shows us which ads bring the most visitors, what pages they look at, and what actions they take (like calling your office or filling out forms). This helps us improve your ads to get better results. <strong>No personal health information is tracked.</strong>
                        </p>
                    </div>

                    <!-- Meta Pixel Explanation (hidden initially) -->
                    <div id="pixelInfo" class="info-box warning">
                        <h6>Meta Pixel (Facebook/Instagram):</h6>
                        <p>
                            Meta Pixel tracks when people visit your website after seeing your Facebook or Instagram ads. It helps us find more people similar to your best customers and shows ads to people who visited your website but didn't book an appointment yet. <strong>No personal health information is tracked.</strong>
                        </p>
                    </div>

                    <ul style="margin-left: 20px; color: #012E40; line-height: 1.6;">
                        <li>‚úì Google Analytics 4 (GA4) tracking code</li>
                        <li>‚úì Meta Pixel tracking code</li>
                        <li>‚úì Conversion tracking setup</li>
                        <li>‚úì Testing to ensure everything works</li>
                    </ul>
                    <p style="font-size: 0.9rem; color: #012E40; margin-top: 10px;">
                        <strong>Timeline:</strong> Completed within 24-48 hours of receiving access.
                    </p>
                </div>
            </div>
            <div class="step-actions">
                <button class="btn btn-complete" onclick="window.markStepComplete(4)">Mark Step 4 Complete</button>
            </div>
        </div>

        <!-- Step 5: Creative Approval -->
        <div class="step locked" id="step5">
            <div class="step-header">
                <div>
                    <h2>Creative Approval</h2>
                    <div class="step-note">Your Launch Bundle: 1 actor video, 1 animated video, 2 image ads.</div>
                </div>
                <div class="step-number">5</div>
            </div>
            <div class="step-content">
                <div class="gallery-placeholder" id="galleryPlaceholder">
                    <p>Creative previews will be shared via secure link</p>
                    <p style="font-size: 0.9rem; color: #85C7B3; margin-top: 10px;">
                        Links will be provided once creatives are ready for review
                    </p>
                </div>
                
                <div style="margin: 20px 0;">
                    <button class="btn btn-secondary" onclick="window.approveCreatives()">
                        üöÄ Approve to Launch
                    </button>
                    <button class="btn btn-outline" onclick="window.requestRevisions()">
                        Request Revisions
                    </button>
                </div>
                
                <!-- Revision Form (hidden) -->
                <div id="revisionForm" style="display: none; background: #DFF5F3; padding: 20px; border-radius: 8px; margin-top: 15px; border: 1px solid #85C7B3;">
                    <h4 style="color: #012E40;">Request Revisions</h4>
                    <div class="form-group">
                        <label for="revisionNotes">Revision Notes</label>
                        <textarea id="revisionNotes" rows="4" placeholder="Please describe the changes..."></textarea>
                    </div>
                    <button class="btn" onclick="window.submitRevisions()">Submit Revisions</button>
                </div>
            </div>
            <div class="step-actions">
                <button class="btn btn-complete" onclick="window.markStepComplete(5)">Mark Step 5 Complete</button>
            </div>
        </div>

        <!-- Footer -->
        <div class="portal-footer">
            <p>Drive Lead Media ‚Äî Professional digital marketing solutions.</p>
            <div class="footer-links">
                <span id="contactEmail">Nicolas@driveleadmedia.com</span>
                <span>‚Ä¢</span>
                <span id="contactPhone">(678) 650-6411</span>
            </div>
        </div>
    </div>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- Configuration -->
    <script src="config.js"></script>
    
    <!-- Main Functions -->
    <script src="functions.js"></script>

    <script>
        // Portal 2 Admin Functions (exactly like Portal 1)
        const PORTAL_BASE_URL = 'https://portal2.driveleadmedia.com';
        let isAdminMode = false;

        // Show admin login
        function showAdminLogin() {
            const password = prompt('Enter admin password:');
            if (password === 'dlm2024admin') {
                isAdminMode = true;
                document.getElementById('clientPortal').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                document.getElementById('floatingProgressSidebar').style.display = 'none';
                loadAdminClients();
            } else if (password !== null) {
                alert('Incorrect password');
            }
        }

        // Show admin alert
        function showAdminAlert(message, type = 'success') {
            const alertDiv = document.getElementById('adminAlert');
            alertDiv.className = type === 'success' ? 
                'background: rgba(34, 197, 94, 0.1); color: #22c55e; border: 1px solid #22c55e;' :
                'background: rgba(255, 107, 107, 0.1); color: #ff6b6b; border: 1px solid #ff6b6b;';
            alertDiv.textContent = message;
            alertDiv.style.display = 'block';
            setTimeout(() => alertDiv.style.display = 'none', 5000);
        }

        // Generate client ID
        function generateClientId() {
            return 'client2_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        // Create new client
        document.getElementById('createClientForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const clientData = {
                clientId: generateClientId(),
                clientName: document.getElementById('clientName').value,
                clientEmail: document.getElementById('clientEmail').value || null,
                active: true,
                createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                
                step1Complete: false,
                step2Complete: false,
                step3Complete: false,
                step4Complete: false,
                step5Complete: false,
                
                dpaLink: document.getElementById('dpaLink').value || null,
                serviceAgreementLink: document.getElementById('serviceAgreementLink').value || null,
                googleDriveLink: document.getElementById('googleDriveLink').value || null,
                invoiceLink: document.getElementById('invoiceLink').value || null,
                creativeLink: document.getElementById('creativeLink').value || null
            };
            
            try {
                await db.collection('clients').doc(clientData.clientId).set(clientData);
                showAdminAlert(`Client created! Portal link: ${PORTAL_BASE_URL}?c=${clientData.clientId}`);
                document.getElementById('createClientForm').reset();
                loadAdminClients();
            } catch (error) {
                console.error('Error creating client:', error);
                showAdminAlert('Error creating client. Please try again.', 'error');
            }
        });

        // Load clients for admin
        async function loadAdminClients() {
            try {
                const snapshot = await db.collection('clients').orderBy('createdAt', 'desc').get();
                const tbody = document.getElementById('clientsTableBody');
                tbody.innerHTML = '';
                
                snapshot.forEach(doc => {
                    const data = doc.data();
                    const portalLink = `${PORTAL_BASE_URL}?c=${data.clientId}`;
                    
                    const row = tbody.insertRow();
                    row.innerHTML = `
                        <td style="padding: 12px; border-bottom: 1px solid #e0e0e0;">${data.clientName}</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e0e0e0;">
                            <span style="padding: 4px 12px; border-radius: 12px; font-size: 0.85rem; font-weight: 600; ${data.active ? 'background: rgba(34, 197, 94, 0.2); color: #22c55e;' : 'background: rgba(255, 107, 107, 0.2); color: #ff6b6b;'}">
                                ${data.active ? 'Active' : 'Inactive'}
                            </span>
                        </td>
                        <td style="padding: 12px; border-bottom: 1px solid #e0e0e0;">
                            <div style="display: flex; gap: 4px;">
                                <div style="width: 20px; height: 20px; border-radius: 50%; ${data.step1Complete ? 'background: #22c55e; color: white;' : 'background: #e0e0e0;'} display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 600;">1</div>
                                <div style="width: 20px; height: 20px; border-radius: 50%; ${data.step2Complete ? 'background: #22c55e; color: white;' : 'background: #e0e0e0;'} display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 600;">2</div>
                                <div style="width: 20px; height: 20px; border-radius: 50%; ${data.step3Complete ? 'background: #22c55e; color: white;' : 'background: #e0e0e0;'} display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 600;">3</div>
                                <div style="width: 20px; height: 20px; border-radius: 50%; ${data.step4Complete ? 'background: #22c55e; color: white;' : 'background: #e0e0e0;'} display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 600;">4</div>
                                <div style="width: 20px; height: 20px; border-radius: 50%; ${data.step5Complete ? 'background: #22c55e; color: white;' : 'background: #e0e0e0;'} display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 600;">5</div>
                            </div>
                        </td>
                        <td style="padding: 12px; border-bottom: 1px solid #e0e0e0;">
                            <input type="text" value="${portalLink}" readonly style="width: 200px; padding: 4px; margin-right: 5px;">
                            <button onclick="copyToClipboard('${portalLink}')" style="padding: 4px 8px; background: #85C7B3; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.8rem;">Copy</button>
                        </td>
                        <td style="padding: 12px; border-bottom: 1px solid #e0e0e0;">
                            <button onclick="toggleClientStatus('${data.clientId}', ${!data.active})" style="padding: 8px 16px; ${data.active ? 'background: #ff6b6b;' : 'background: #22c55e;'} color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 0.85rem; margin-right: 5px;">
                                ${data.active ? 'Deactivate' : 'Activate'}
                            </button>
                        </td>
                    `;
                });
            } catch (error) {
                console.error('Error loading clients:', error);
                showAdminAlert('Error loading clients', 'error');
            }
        }

        // Copy to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showAdminAlert('Portal link copied to clipboard!');
            });
        }

        // Toggle client status
        async function toggleClientStatus(clientId, activate) {
            try {
                await db.collection('clients').doc(clientId).update({
                    active: activate,
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                });
                showAdminAlert(`Client ${activate ? 'activated' : 'deactivated'} successfully`);
                loadAdminClients();
            } catch (error) {
                console.error('Error updating status:', error);
                showAdminAlert('Error updating client status', 'error');
            }
        }

        // Make functions global for admin panel
        window.showAdminLogin = showAdminLogin;
        window.copyToClipboard = copyToClipboard;
        window.toggleClientStatus = toggleClientStatus;
    </script>
</body>
</html>
